# Prompt Management Platform

## 1. 项目简介

Prompt Management Platform 是一个功能强大的提示词管理与协作工具。它旨在帮助个人和团队高效地创建、管理、共享和版本化各类提示词。

平台后端基于 Django Rest Framework 构建，提供稳定、安全的 API 服务；前端则采用 React 和 Material-UI，打造了现代化、响应式且用户友好的操作界面。

## 2. 主要功能

- **用户系统**:
  - 支持用户注册、登录和个人信息管理。
  - 基于角色的权限控制（管理员、普通用户）。
- **提示词管理**:
  - 提供完整的提示词增、删、改、查（CRUD）功能。
  - 支持私有模式和团队共享模式，方便协作。
- **版本控制**:
  - 自动记录提示词的每一次内容变更，形成版本历史。
  - 支持查看历史版本详情，并可一键恢复到任意旧版本。
  - 每次更新可附带提交信息（Commit Message），方便追溯。
- **标签系统**:
  - 支持为提示词添加多个自定义标签，方便分类和检索。
  - 在仪表盘提供基于标签的快速筛选功能。
  - 创建或编辑提示词时，若未指定标签，将自动关联 "Default" 标签。
- **界面与体验**:
  - 现代化、简洁的设计，支持浅色与深色模式。
  - 完整的国际化支持（中文/英文）。
  - 响应式布局，适配桌面、平板和移动设备。
  - 提供卡片和列表两种视图模式来浏览提示词。

## 3. 技术栈

### 后端 (Backend)

- **框架**: Django, Django Rest Framework
- **数据库**: SQLite (默认), 可配置为 PostgreSQL, MySQL 等
- **认证**: Token-based Authentication (基于令牌的认证)
- **部署**: Docker, Gunicorn

### 前端 (Frontend)

- **框架**: React
- **UI 组件库**: Material-UI (MUI)
- **状态管理**: Redux Toolkit
- **路由**: React Router
- **国际化**: i18next, react-i18next
- **动画**: Framer Motion
- **API 请求**: Axios

## 4. 项目结构

### 后端目录结构

```
.
├── api/                  # API 跄由聚合
├── prompts/              # 核心应用：提示词、版本、标签管理
├── prompt_management/    # Django 项目主配置
├── users/                # 用户及认证管理应用
└── manage.py             # Django 管理脚本
```

### 前端目录结构

```
frontend/
├── public/               # 公共静态资源
└── src/
    ├── api/              # (隐式) API 请求逻辑封装在 Slice 中
    ├── components/       # 可复用 React 组件
    ├── contexts/         # React Context
    ├── i18n/             # 国际化配置与语言文件
    ├── slices/           # Redux Toolkit 的 State Slices
    ├── store.js          # Redux Store 配置
    ├── App.js            # 应用主组件
    └── index.js          # 应用入口
```

## 5. API 概览

所有 API 均以 `/api/` 为前缀。

- **用户认证**:
  - `POST /users/register/`: 用户注册
  - `POST /users/login/`: 用户登录
  - `POST /users/logout/`: 用户登出
  - `GET, PUT /users/profile/`: 获取/更新用户个人资料
- **提示词**:
  - `GET, POST /prompts/`: 获取提示词列表、创建新提示词
  - `GET, PUT, DELETE /prompts/{id}/`: 获取、更新、删除单个提示词
- **提示词版本**:
  - `GET /prompts/{prompt_id}/versions/`: 获取某提示词的版本历史
  - `POST /prompts/{prompt_id}/versions/{version_id}/restore/`: 恢复到指定版本
- **标签**:
  - `GET, POST /prompts/tags/`: 获取标签列表、创建新标签
  - `GET, PUT, DELETE /prompts/tags/{id}/`: 获取、更新、删除单个标签

## 6. 安装与启动

### 环境要求

- Python 3.8+
- Node.js 16+
- `pip` 和 `npm` (或 `yarn`)

### 后端启动

1.  **克隆仓库**:

    ```bash
    git clone <repository_url>
    cd PromptManager
    ```
2.  **创建并激活虚拟环境**:

    ```bash
    python3 -m venv .venv
    source .venv/bin/activate
    ```
3.  **安装依赖**:

    ```bash
    pip install -r requirements.txt
    ```
4.  **数据库迁移**:

    ```bash
    python manage.py migrate
    ```
5.  **启动开发服务器**:

    ```bash
    python manage.py runserver
    ```
    后端服务将在 `http://127.0.0.1:8000` 运行。

### 前端启动

1.  **进入前端目录**:

    ```bash
    cd frontend
    ```
2.  **安装依赖**:

    ```bash
    npm install
    ```
3.  **启动开发服务器**:

    ```bash
    npm start
    ```
    前端应用将在 `http://localhost:3000` 运行，并自动连接到后端 API。

## 7. Docker 部署

项目提供了 Docker 和 Docker Compose 配置，方便快速部署。

- **开发环境**:

  ```bash
  docker-compose up --build
  ```

  此命令将同时启动后端和前端的开发服务器。
- **生产环境**:

  ```bash
  docker-compose -f docker-compose.prod.yml up --build -d
  ```

  此命令将构建并以后台模式运行生产环境的应用。